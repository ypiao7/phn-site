<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PHN Prediction</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root {
      --color-primary: #00A389;
      --color-primary-dark: #008771;
      --color-light-accent: #E0F2F1;
      --color-body-bg: #f5f7fa;
    }

    body { background-color: var(--color-body-bg); }

    .page-title {
      text-align: center; margin-top: 30px; margin-bottom: 5px;
      font-weight: 700; color: var(--color-primary); font-size: 2.5rem;
    }

    .text-center.text-muted { margin-bottom: 30px; }

    .card {
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 25px;
      border: none;
      background-color: white;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
    }

    .card h4 {
      color: #343a40; font-weight: 600;
      border-bottom: 2px solid var(--color-light-accent);
      padding-bottom: 10px; margin-bottom: 20px;
    }

    label { font-weight: 500; margin-bottom: 5px; }

    .form-control:focus {
      border-color: var(--color-primary);
      box-shadow: 0 0 0 0.25rem rgba(0, 163, 137, 0.25);
    }

    .btn-primary {
      --bs-btn-bg: var(--color-primary);
      --bs-btn-border-color: var(--color-primary);
      --bs-btn-hover-bg: var(--color-primary-dark);
      --bs-btn-hover-border-color: var(--color-primary-dark);
    }

    .action-btn-group { margin-top: 30px; margin-bottom: 50px; }

    .normal-range-tip {
      display: block;
      font-size: 0.75rem;
      color: #6c757d;
      margin-top: 2px;
      line-height: 1.2;
    }
  </style>
</head>

<body>
<div class="container">

  <h1 class="page-title">PHN Prediction</h1>
  <p class="text-center text-muted">Enter patient basic information to predict PHN</p>

  <div class="row justify-content-center">
    <div class="col-lg-10">

      <!-- ✅ GitHub Pages：不要 action="/predict"，用 JS 调接口 -->
      <form id="phnForm">

        <!-- ================= Basic Information ================= -->
        <div class="card shadow-sm">
          <h4>Basic Information (*Required field)</h4>
          <div class="row g-3">

            <!-- 必填项 -->
            <div class="col-md-3">
              <label for="age">*Age</label>
              <input type="number" class="form-control" id="age" name="age" min="0" max="200" required>
            </div>

            <div class="col-md-3">
              <label for="baseline_vas">*Baseline_VAS</label>
              <!-- ✅ 重要：name 必须是 baseline_vas（与你后端 FORM_TO_FEATURE 对齐） -->
              <input type="number" step="0.1" class="form-control" id="baseline_vas" name="baseline_vas" min="0" max="10" required>
            </div>

            <div class="col-md-3">
              <label for="pcs_score">*PCS</label>
              <input type="number" step="0.01" class="form-control" id="pcs_score" name="pcs_score" min="0" required>
            </div>

            <div class="col-md-3">
              <label for="mcs_score">*MCS</label>
              <input type="number" step="0.01" class="form-control" id="mcs_score" name="mcs_ics_score" min="0" required>
            </div>

            <div class="col-md-3">
              <label for="psqi_score">*PSQI</label>
              <input type="number" step="1" class="form-control" id="psqi_score" name="psqi_score" min="0" max="21" required>
            </div>

            <!-- 非必填（全部保留展示） -->
            <div class="col-md-3">
              <label for="gender">Gender</label>
              <select class="form-control" id="gender" name="gender">
                <option value="" selected></option>
                <option value="1">Male</option>
                <option value="2">Female</option>
              </select>
            </div>

            <div class="col-md-3">
              <label for="bmi">BMI (kg/m&sup2;)</label>
              <input type="number" step="0.01" class="form-control" id="bmi" name="bmi" min="0">
            </div>

            <div class="col-md-3">
              <label for="dm">DM</label>
              <select class="form-control" id="dm" name="dm">
                <option value="" selected></option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
              </select>
            </div>

            <div class="col-md-3">
              <label for="hypertension">Hypertension</label>
              <select class="form-control" id="hypertension" name="hypertension">
                <option value="" selected></option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
              </select>
            </div>

            <div class="col-md-3">
              <label for="chd">CHD</label>
              <select class="form-control" id="chd" name="chd">
                <option value="" selected></option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
              </select>
            </div>

            <div class="col-md-3">
              <label for="nsaids_aceta">NSAIDs/Acetaminophen</label>
              <select class="form-control" id="nsaids_aceta" name="nsaids_acetaminophen_use">
                <option value="" selected></option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
              </select>
            </div>

            <div class="col-md-3">
              <label for="oxy_aceta">Oxycodone/Acetaminophen</label>
              <select class="form-control" id="oxy_aceta" name="oxycodone_acetaminophen_use">
                <option value="" selected></option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
              </select>
            </div>

          </div>
        </div>

        <!-- ================= Blood Information ================= -->
        <div class="card shadow-sm">
          <h4>Blood Information (*Required field)</h4>
          <div class="row g-3">

            <!-- 必填项（模型用） -->
            <div class="col-md-3">
              <label for="ly_count">*LY# (&times;10<sup>9</sup>/L)</label>
              <input type="number" step="0.01" class="form-control" id="ly_count" name="ly_count" min="0" required>
              <span class="normal-range-tip">References: 1.1–3.2</span>
            </div>

            <div class="col-md-3">
              <label for="mono_count">*MO# (&times;10<sup>9</sup>/L)</label>
              <input type="number" step="0.01" class="form-control" id="mono_count" name="mono_count" min="0" required>
              <span class="normal-range-tip">References: 0.1–0.6</span>
            </div>

            <div class="col-md-3">
              <label for="alb">*ALB (g/L)</label>
              <input type="number" step="0.1" class="form-control" id="alb" name="alb" min="0" required>
              <span class="normal-range-tip">References: 40–55</span>
            </div>

            <div class="col-md-3">
              <label for="glu">*Glu (mmol/L)</label>
              <input type="number" step="0.01" class="form-control" id="glu" name="glu" min="0" required>
              <span class="normal-range-tip">References: 3.9–6.1</span>
            </div>

            <div class="col-md-3">
              <label for="a_g">*A/G</label>
              <input type="number" step="0.1" class="form-control" id="a_g" name="a_g" min="0" required>
              <span class="normal-range-tip">References: 1.2–2.4</span>
            </div>

            <!-- 其余字段：全部保留展示（不会影响模型预测，但会一起带到 results.html） -->
            <div class="col-md-3">
              <label for="rbc">RBC (&times;10<sup>12</sup>/L)</label>
              <input type="number" step="0.01" class="form-control" id="rbc" name="rbc" min="0">
              <span class="normal-range-tip">Male: 4.5–5.9<br>Female: 4.1–5.1</span>
            </div>

            <div class="col-md-3">
              <label for="aptt_time">APTT(time) (s)</label>
              <input type="number" step="0.1" class="form-control" id="aptt_time" name="aptt_time" min="0">
              <span class="normal-range-tip">References: 25–40</span>
            </div>

            <div class="col-md-3">
              <label for="neut_count">NEUT# (&times;10<sup>9</sup>/L)</label>
              <input type="number" step="0.01" class="form-control" id="neut_count" name="neut_count" min="0">
              <span class="normal-range-tip">References: 1.8–6.3</span>
            </div>

            <div class="col-md-3">
              <label for="eo_count">EO# (&times;10<sup>9</sup>/L)</label>
              <input type="number" step="0.01" class="form-control" id="eo_count" name="eo_count" min="0">
              <span class="normal-range-tip">References: 0.02–0.52</span>
            </div>

            <div class="col-md-3">
              <label for="ba_count">BA# (&times;10<sup>9</sup>/L)</label>
              <input type="number" step="0.01" class="form-control" id="ba_count" name="ba_count" min="0">
              <span class="normal-range-tip">References: 0–0.06</span>
            </div>

            <div class="col-md-3">
              <label for="ly_percent">LY%</label>
              <input type="number" step="0.1" class="form-control" id="ly_percent" name="ly_percent" min="0">
              <span class="normal-range-tip">References: 20–50</span>
            </div>

            <div class="col-md-3">
              <label for="mo_percent">MO%</label>
              <input type="number" step="0.1" class="form-control" id="mo_percent" name="mo_percent" min="0">
              <span class="normal-range-tip">References: 3–10</span>
            </div>

            <div class="col-md-3">
              <label for="ba_percent">BA%</label>
              <input type="number" step="0.1" class="form-control" id="ba_percent" name="ba_percent" min="0">
              <span class="normal-range-tip">References: 0–1</span>
            </div>

            <div class="col-md-3">
              <label for="mcv">MCV (fL)</label>
              <input type="number" step="0.1" class="form-control" id="mcv" name="mcv" min="0">
              <span class="normal-range-tip">References: 80–100</span>
            </div>

            <div class="col-md-3">
              <label for="mchc">MCHC (g/L)</label>
              <input type="number" step="1" class="form-control" id="mchc" name="mchc" min="0">
              <span class="normal-range-tip">References: 330–370</span>
            </div>

            <div class="col-md-3">
              <label for="rdw_cv">RDW-CV (%)</label>
              <input type="number" step="0.1" class="form-control" id="rdw_cv" name="rdw_cv" min="0">
              <span class="normal-range-tip">References: 10.1–16.0</span>
            </div>

            <div class="col-md-3">
              <label for="plt">PLT (&times;10<sup>9</sup>/L)</label>
              <input type="number" step="1" class="form-control" id="plt" name="plt" min="0">
              <span class="normal-range-tip">References: 150–350</span>
            </div>

            <div class="col-md-3">
              <label for="mpv">MPV (fL)</label>
              <input type="number" step="0.1" class="form-control" id="mpv" name="mpv" min="0">
              <span class="normal-range-tip">References: 7.0–11.0</span>
            </div>

            <div class="col-md-3">
              <label for="tt_time">TT(time) (s)</label>
              <input type="number" step="0.1" class="form-control" id="tt_time" name="tt_time" min="0">
              <span class="normal-range-tip">References: 11–14</span>
            </div>

            <div class="col-md-3">
              <label for="alt">ALT (U/L)</label>
              <input type="number" step="0.1" class="form-control" id="alt" name="alt" min="0">
              <span class="normal-range-tip">References: 10–40</span>
            </div>

            <div class="col-md-3">
              <label for="ast">AST (U/L)</label>
              <input type="number" step="0.1" class="form-control" id="ast" name="ast" min="0">
              <span class="normal-range-tip">References: 10–30</span>
            </div>

            <div class="col-md-3">
              <label for="tp">TP (g/L)</label>
              <input type="number" step="0.1" class="form-control" id="tp" name="tp" min="0">
              <span class="normal-range-tip">References: 65–85</span>
            </div>

            <div class="col-md-3">
              <label for="urea">Urea (mmol/L)</label>
              <input type="number" step="0.1" class="form-control" id="urea" name="urea" min="0">
              <span class="normal-range-tip">Ranges vary by age/sex</span>
            </div>

            <div class="col-md-3">
              <label for="cr">Cr (&mu;mol/L)</label>
              <input type="number" step="0.1" class="form-control" id="cr" name="cr" min="0">
              <span class="normal-range-tip">Ranges vary by age/sex</span>
            </div>

            <div class="col-md-3">
              <label for="co2">CO<sub>2</sub> (mmol/L)</label>
              <input type="number" step="0.1" class="form-control" id="co2" name="co2" min="0">
              <span class="normal-range-tip">References: 22–28</span>
            </div>

            <div class="col-md-3">
              <label for="na">Na (mmol/L)</label>
              <input type="number" step="0.1" class="form-control" id="na" name="na" min="0">
              <span class="normal-range-tip">References: 137–147</span>
            </div>

            <div class="col-md-3">
              <label for="k">K (mmol/L)</label>
              <input type="number" step="0.01" class="form-control" id="k" name="k" min="0">
              <span class="normal-range-tip">References: 3.5–5.3</span>
            </div>

            <div class="col-md-3">
              <label for="glb">GLB (g/L)</label>
              <input type="number" step="0.1" class="form-control" id="glb" name="glb" min="0">
              <span class="normal-range-tip">References: 20–40</span>
            </div>

            <div class="col-md-3">
              <label for="dbil">DBIL (&mu;mol/L)</label>
              <input type="number" step="0.01" class="form-control" id="dbil" name="dbil" min="0">
              <span class="normal-range-tip">References vary by analyzer</span>
            </div>

            <div class="col-md-3">
              <label for="ibil">IBIL (&mu;mol/L)</label>
              <input type="number" step="0.1" class="form-control" id="ibil" name="ibil" min="0">
              <span class="norma
